---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```


# healthburdenr

<!-- badges: start -->
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
<!-- badges: end -->

## Overview

The **healthburdenr** package provides interactive dashboard for exploring healthcare-associated infection (HAI) burden data from the 2011-2012 European Point Prevalence Survey. Based on the methodology from [Zacher et al. (2019)](https://doi.org/10.2807/1560-7917.ES.2019.24.46.1900135), this package estimates the burden of five common HAIs using disability-adjusted life years (DALYs) using 500 Monte Carlo Simulations.

**ðŸ“Š Package Website:** [healthburdenr](https://etc5523-2025.github.io/assignment-4-packages-and-shiny-apps-jcha0338-monash/)

## Features

- ðŸ“Š **Three curated datasets** on HAI burden in Germany and EU
- ðŸŽ¨ **Interactive Shiny dashboard** with treemaps, bubble charts, and stratified visualizations
- ðŸ“ˆ **Population estimates** with 95% confidence intervals
- ðŸ‘¥ **Demographic analyses** stratified by age and sex
- ðŸ”§ **Data transformation utilities** for BHAI S4 objects
- ðŸ“ **Comprehensive documentation** and vignettes

## Installation

Install the development version from GitHub:

```{r installation-guide, eval=FALSE}
install.packages("remotes")
remotes::install_github("ETC5523-2025/assignment-4-packages-and-shiny-apps-jcha0338-monash")
```


## Quick Start

```{r load-library}
library(healthburdenr)
```

### Explore population-level burden estimates

```{r load-dataset1, eval=FALSE}
data(bhai_pop_est)
head(bhai_pop_est)
```

### View survey sample distribution

```{r load-dataset2, eval=FALSE}
data(bhai_pps_sample_distribution)
```

### Launch interactive dashboard

```{r launch-run-app, eval=FALSE}
run_app()
```


## Infection Types

The package covers five major healthcare-associated infections:

| Abbreviation | Full Name | Description |
|--------------|-----------|-------------|
| **HAP** | Hospital-acquired pneumonia | Lower respiratory tract infection |
| **SSI** | Surgical site infection | Post-operative wound infection |
| **BSI** | Bloodstream infection | Bacteremia or septicemia |
| **UTI** | Urinary tract infection | Often catheter-associated |
| **CDI** | *Clostridioides difficile* infection | Antibiotic-associated colitis |

## Interactive Dashboard

Launch the Shiny dashboard to explore the data interactively:

```{r runapp2, eval=FALSE}
run_app()
```

The dashboard includes three main views:

1. **Overview** - Hierarchical treemap showing survey sample distribution by country and infection type
2. **Population Estimates** - Bubble charts and detailed tables with burden metrics (cases, deaths, DALYs)
3. **Stratified Analysis** - Diverging bar charts showing demographic patterns by age group and sex

## Example Analysis

Calculate case-fatality rates by infection type:

```{r example-1, eval=FALSE}
library(dplyr)

bhai_pop_est |>
filter(country == "Germany", infection != "ALL") |>
mutate(cfr = (deaths_point_estimate / cases_point_estimate) * 100) |>
select(infection, cases_point_estimate, deaths_point_estimate, cfr) |>
arrange(desc(cfr))
```


## Available Datasets

- **`bhai_pop_est`** - Population-level burden estimates with point estimates and 95% CIs
- **`bhai_pps_sample_distribution`** - Survey sample distribution showing HAI prevalence
- **`bhai_strata_summary`** - Demographic stratification by age group and sex

## Functions

- **`run_app()`** - Launch the interactive Shiny dashboard
- **`flatten_pps()`** - Convert BHAI S4 objects to tidy tibbles

## Documentation

- [**Package Website**](https://etc5523-2025.github.io/assignment-4-packages-and-shiny-apps-jcha0338-monash/)
